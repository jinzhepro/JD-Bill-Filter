# AGENTS.md

This file provides guidance to agents when working with code in this repository.

## 项目架构规则（非显而易见部分）

### 系统架构设计

- 采用单页应用架构，所有状态管理在客户端完成
- 文件处理完全在浏览器中进行，不依赖后端服务
- 使用 Context API + useReducer 模式管理全局状态，避免状态提升
- 组件设计采用容器/展示模式，业务逻辑与 UI 分离

### 数据流架构

- 数据处理采用管道模式：文件读取 → 数据验证 → 订单处理 → 结果输出
- 多文件合并采用两阶段处理：先单独处理每个文件，再合并结果
- 状态更新通过 action 派发实现，确保状态变更的可预测性
- 错误处理采用边界捕获模式，每个处理环节都有独立的错误处理

### 组件架构约束

- AppContent 作为主控制器，负责组件的条件渲染和状态协调
- 文件上传组件与数据处理逻辑解耦，通过 Context 通信
- Modal 组件采用 Portal 模式渲染，避免样式层级问题
- 表格组件支持虚拟滚动优化，处理大数据量时性能更好

### 性能架构考虑

- 使用 React.memo 优化纯组件渲染，特别是 Button 等基础组件
- 文件读取使用 FileReader API，支持大文件的异步处理
- 数据处理使用 Web Workers 潜在优化点（当前在主线程）
- 状态更新使用 useCallback 避免不必要的函数重创建

### 扩展性架构设计

- 文件处理模块化设计，易于添加新的文件格式支持
- 数据处理管道可扩展，支持添加新的数据处理步骤
- 组件库采用原子设计原则，便于复用和维护
- 样式系统基于 Tailwind CSS，支持主题定制和响应式扩展
